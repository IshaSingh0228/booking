pipeline{
    agent 
  {
    docker{
     image 'maven:3.6.3-jdk-11'
        args '-v/.m2:/root/.m2'
  }
}
    stages{
        stage('mvn clean'){
            steps{
                sh 'mvn compile'
            }
        }
        stage('build and sonarqube analysis'){
            steps{
                withSonarQubeEnv('sonar1'){
                sh 'mvn package sonar:sonar'
                }    
            }
        }
        
    }
}
