pipeline{
    agent 
  {
    docker{
     image 'maven:3-alpine'
        args '-v/.m2:/root/.m2'
  }
}
    stages{
        stage('mvn clean'){
            steps{
                bat 'mvn compile'
            }
        }
        stage('build and sonarqube analysis'){
            steps{
                withSonarQubeEnv('sonar-server'){
                bat 'mvn package sonar:sonar'
                }    
            }
        }
        
    }
}
